# `git commit` 消息格式规范

严格规范 `git commit` 消息填写格式，有助于提高项目历史信息的可读性。并且，`git commit` 消息将作为项目版本发布的 `change log`，在 ci 流程中使用「语义化发布工具」自动生成。

## 目录

  - [关于「能愿动词」的使用](#关于能愿动词的使用)
  - [消息格式说明](#消息格式说明)
    - [类型](#类型)
    - [作用域](#作用域)
    - [描述](#描述)
    - [正文](#正文)
    - [脚注](#脚注)

## 关于「能愿动词」的使用

为了避免歧义，文档大量使用了「能愿动词」，对应的解释如下：

* `必须 (MUST)`：绝对，严格遵循，请照做，无条件遵守；
* `一定不可 (MUST NOT)`：禁令，严令禁止；
* `应该 (SHOULD)` ：强烈建议这样做，但是不强求；
* `不该 (SHOULD NOT)`：强烈不建议这样做，但是不强求；
* `可以 (MAY)` 和 `可选 (OPTIONAL)` ：选择性高一点，在这个文档内，此词语使用较少；

> 参见：[RFC 2119](http://www.ietf.org/rfc/rfc2119.txt)

## 消息格式说明

每个`git commit` 消息由「头部」，「正文」和「脚注」构成。其中，「头部」格式比较特殊，包含「类型」，「作用域」和「描述」三部分：

---
```
<类型>(<作用域>): <描述>
// 空一行
[正文]
// 空一行
[脚注]
```
---

「头部」就是以上结构的第一行：`<类型>(<作用域>): <描述>`。

消息结构 `必须` 遵守如下约定：

* 「头部」是 `必须` 的，「正文」和「脚注」是 `可选` 的
* 「头部」中的「类型」和「描述」是 `必须` 的，「作用域」是 `可选` 的
* 任何一行 `commit` 消息 `一定不可` 超过 100 个字符。这是为了便于在各个 `Git` 服务及工具中便于阅读

### 「类型」

「类型」用于说明 `commit` 的类别，`必须` 是以下列表中的一种：

* **fix**: 「类型」为 `fix` 的提交在代码库中修复了一个 `bug`，这和语义化版本中的 [`PATCH`](https://semver.org/#summary) 相对应
* **feat**: 「类型」为 `feat` 的提交表示在代码库中新增了一个功能，这和语义化版本中的 [`MINOR`](https://semver.org/#summary) 相对应
* **docs**: 仅文档的修改(`documentation`）
* **style**: 不影响代码含义的代码修改（空格，格式化，缺少分号，等等）
* **refactor**: 既不是修复 `bug` 也不是新增功能的代码修改
* **test**: 添加缺少的「单元测试」，或更正已存在的「单元测试」
* **perf**: 对当前实现进行改进，提升性能的代码修改
* **ci**: 对 CI 配置文件或脚本的更改(例如：Jenkins，Drone，Travis)
* **build**: 影响构建或外部依赖的更改（例如：composer，npm，mvn）

### 作用域

用于说明 commit 影响的范围，比如路由、中间件、公共函数、功能点等等，视项目不同而不同。

